---
layout: page
title: BDE Preworkout
permalink: /demo
---
<style>
</style>

<div class="section">
  <div class="dropdown">
    <div class="popup" onclick="error_balloon()">
      <span class="popuptext" href="#popup1" id="errorPopup_01">Supplement Already Added</span>
    </div>
    <button onclick="button_showhide_toggle()" class="dropbtn">Add Supplement</button>
    <div id="myDropdown" class="dropdown-content">
    </div>
  </div>
  <div class="supplements" id="supplement_list"></div>
  <div class="nutrition_label">
    <header class="nutrition-facts__header">
      <h1 class="nutrition-facts__title">Nutrition Facts</h1>
      <h6 id="serving_size">Serving Size: 1 scoop (0 g)</h6>
      <h6>Serving Per Container: 30</h6>
    </header>
    <section class="nutrition-facts" id="nutrition_list"></section>
      <table class="nutrition-facts__table" id="nutrition_table">
        <thead>
          <tr>
            <th colspan="2">
              <h6>Amount Per Serving</h6>
            </th>
            <td><h6>% Daily Value*</h6></td>
          </tr>
        </thead>
      </table>
    </section>
  </div>
</div>

<script>
  /* *********************************
              JAVASCRIPT
  ********************************* */

  const supplement_data = [
    {name: 'bcaa', propername: 'BCAA', max: 20, unit: 'g', step: 0.1, dv: '†', qty: 0},
    {name: 'betaalanine', propername: 'Beta Alanine', max: 5, unit: 'g', step: 0.1, dv: 1.2, qty: 0},
    {name: 'caffeine', propername: 'Caffeine', max: 300, unit: 'mg', step: 1.0, dv: 200, qty: 0},
    {name: 'creatine', propername: 'Creatine', max: 5, unit: 'g', step: 0.1, dv: '†', qty: 0},
    {name: 'larganine', propername: 'L-Arganine', max: 2, unit: 'g', step: 0.1, dv: '†', qty: 0},
    {name: 'lcitrulline', propername: 'L-Citrulline', max: 5, unit: 'g', step: 0.1, dv: '†', qty: 0},
    {name: 'niacin', propername: 'Niacin', max: 500, unit: 'mg', step: 1, dv: 20, qty: 0},
    {name: 'taurine', propername: 'Taurine', max: 800, unit: 'mg', step: 1, dv: '†', qty: 0},
    {name: 'theanine', propername: 'Theanine', max: 500, unit: 'mg', step: 1.0, dv: '†', qty: 0}
  ];

  var serving_size_amt = 0;
  var index = 0;
  var i = 0;

  function button_showhide_toggle() {
    // Toggle showing/hiding list
    document.getElementById("myDropdown").classList.toggle("show");
    
    // Populate list
    var x ="<input type='text' placeholder='Search..' id='myInput' onkeyup='filterFunction()'>";
    var i;
    for (i=0; i<=(supplement_data.length-1); i++) {
      x = x + "<a onclick=add_supplement('" + supplement_data[i].name + "')>" + supplement_data[i].propername + "</a>";
    }
    document.getElementById("myDropdown").innerHTML = x;
  }
  
  function add_supplement(name) {

    // Get supplement list
    var supplementList = document.getElementById('supplement_list');
    var nutritionList = document.getElementById('nutrition_list');

    var length = supplementList.children.length;
    var i;

    var slider_id = "slide_";
    slider_id = slider_id.concat(name);

    var minus = "minus_";
    minus = minus.concat(name);
    var plus = "plus_";
    plus = plus.concat(name);

    // 1 for yes, 0 for no; initialize yes to enter first supplement
    if (length==0){
      var do_we_add = 1; 
    }
    else{
      var do_we_add = 0;
    }

    for (i=0; i<length; i++){

      // if the name clicked is the same as child i, then we do not add it
      if (name==supplementList.children[i].localName){
        // if name is on list we do not add it to the list
        do_we_add = 0; 
        // console.log(do_we_add);
        error_balloon();
        break;
      }
      else{
        // if name is not on list we add it to the list
        do_we_add = 1;
        // console.log(do_we_add);
      }
    }
    if (do_we_add==1){

      // Find supplement info from data table
      function getSupp(supp) { 
        return supp.name === name;
      }
      var supplement = supplement_data.find(getSupp);

      // Elements & Objects
      var slidecontainer = document.createElement(supplement.name);
      supplement.slider_id = slider_id;
      slidecontainer.innerHTML = '<h5>'+supplement.propername+'</h5>';

      var supplementcontainer = document.createElement(supplement.name);
      // supplementcontainer.innerHTML = '<h5>'+supplement.propername+'</h5>';

      var slider_input = document.createElement("input");
      slider_input.class = "slider";
      slider_input.type = "range";
      slider_input.min = 0;
      slider_input.max = supplement.max;
      slider_input.step = supplement.step;
      slider_input.value = 0;
      slider_input.id = slider_id;

      // decimal place
      var fixed = 1;
      if (slider_input.step == 1){
        fixed = 0;
      }

      var output = document.createElement("output");
      var output_id = "output_";
      output_id = output_id.concat(supplement.name);
      output.id = output_id;

      output.innerHTML = '<span style="color:white">Amount: <span style="font-weight:bold;color:red"> 0 </span>' + supplement.unit + '</span>'; //<button id='+plus+' style="float:right" >+</button><button id='+minus+' style="float:right" >−</button>';

      var plus_input = document.createElement("input");
      plus_input.type = "button";
      plus_input.id = plus;
      plus_input.value = "+";

      var minus_input = document.createElement("input");
      minus_input.type = "button";
      minus_input.id = minus;
      minus_input.value = "-";
      
      minus_input.addEventListener('click', event => {
        event.preventDefault();
        const currentValue = Number(supplement.qty) || 0;
        supplement.qty = currentValue - 1;
        slider_input.value = supplement.qty;
        output.innerHTML = '<span style="color:white">Amount:' + '<span style="font-weight:bold;color:red"> ' + parseFloat(supplement.qty).toFixed(fixed)  + '</span> ' + supplement.unit + '</span>';
        var cell1 = document.getElementById(supplement.name);
        cell1.innerHTML = '<span style="font-weight:bold">' + supplement.propername + ': </span>' + supplement.qty + ' ' + supplement.unit;
        var cell3_id = "dv_";
        cell3_id = cell3_id.concat(supplement.name);

        var cell3 = document.getElementById(cell3_id);

        if (isNaN(supplement.dv)){
          cell3.innerHTML = '†';
        }
        else{
          cell3.innerHTML = parseFloat((supplement.qty/supplement.dv)*100 ).toFixed(0)+ ' %';
        }

      });

      plus_input.addEventListener('click', event => {
        event.preventDefault();
        const currentValue = Number(supplement.qty) || 0;
        supplement.qty = currentValue + 1;
        slider_input.value = supplement.qty;
        output.innerHTML = '<span style="color:white">Amount:' + '<span style="font-weight:bold;color:red"> ' + parseFloat(supplement.qty).toFixed(fixed)  + '</span> ' + supplement.unit + '</span>';
        var cell1 = document.getElementById(supplement.name);
        cell1.innerHTML = '<span style="font-weight:bold">' + supplement.propername + ': </span>' + supplement.qty + ' ' + supplement.unit;
        var cell3_id = "dv_";
        cell3_id = cell3_id.concat(supplement.name);

        var cell3 = document.getElementById(cell3_id);

        if (isNaN(supplement.dv)){
          cell3.innerHTML = '†';
        }
        else{
          cell3.innerHTML = parseFloat((supplement.qty/supplement.dv)*100 ).toFixed(0)+ ' %';
        }
      });

      // Append to container
      slidecontainer.appendChild(slider_input);
      slidecontainer.appendChild(output);
      slidecontainer.appendChild(minus_input);
      slidecontainer.appendChild(plus_input);
      supplementList.appendChild(slidecontainer, slider_id);

      // Update value
      supplement.slider_value = document.getElementById(supplement.slider_id);
      output.innerhtml = supplement.slider_value.value;
      supplement.qty = 0;

      supplement.slider_value.oninput = function() {
        
        // Update supplement data
        supplement.qty = this.value;

        // Update serving size amount on nutrition label
        sum_supplements(supplement);
        // var serving_size = document.getElementById("serving_size");

        output.innerHTML = '<span style="color:white">Amount:' + '<span style="font-weight:bold;color:red"> ' + parseFloat(this.value).toFixed(fixed)  + '</span> ' + supplement.unit + '</span>';
        var cell1 = document.getElementById(supplement.name);
        cell1.innerHTML = '<span style="font-weight:bold">' + supplement.propername + ': </span>' + supplement.qty + ' ' + supplement.unit;

        var cell3_id = "dv_";
        cell3_id = cell3_id.concat(supplement.name);

        var cell3 = document.getElementById(cell3_id);

        if (isNaN(supplement.dv)){
          cell3.innerHTML = '†';
        }
        else{
          cell3.innerHTML = parseFloat((supplement.qty/supplement.dv)*100 ).toFixed(0)+ ' %';
        }
        // console.log(supplement);
      }
    // console.log(nutritionList);
      i++;
      // Update nutrition label
      add_supplement_label(supplement);
    }
  }

  function error_balloon() {
    var popup = document.getElementById("errorPopup_01");
    popup.classList.toggle("show");
  }

  function filterFunction() {
    var input, filter, ul, li, a, i;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    div = document.getElementById("myDropdown");
    a = div.getElementsByTagName("a");
    for (i = 0; i < a.length; i++) {
      txtValue = a[i].textContent || a[i].innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        a[i].style.display = "";
      } else {
        a[i].style.display = "none";
      }
    }
  }
  // var i = 0;

  function sum_supplements(supplement){
    var serving_size = document.getElementById("serving_size");
    // var supplementList = document.getElementById('supplement_data');
    // console.log(supplement_data[0].qty);
    var i = 0;
    var serving_size_amt = 0;
    for (i=0;i<supplement_data.length;i++){
      // supplement = document.getElementById("supplementList.children[i]");
      // console.log(typeof(serving_size_amt));

      if (supplement_data[i].unit == "mg"){
        // console.log(typeof(serving_size_amt));
        serving_size_amt = Number(serving_size_amt) + Number(supplement_data[i].qty/1000);
      }
      else{
        serving_size_amt = Number(serving_size_amt) + Number(supplement_data[i].qty);
      }
    }
    
    serving_size.innerHTML ='<h6>Serving Size: 1 scoop (' + parseFloat(serving_size_amt).toFixed(1) + ' g)</h6>';
  }
  
  // var i = 0;

  function add_supplement_label(supplement) {
    var table = document.getElementById("nutrition_table");
    var row = table.insertRow(index+1);
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
    cell1.innerHTML = '<span style="font-weight:bold">' + supplement.propername + ': </span>' + supplement.qty + ' ' + supplement.unit;
    cell1.id = supplement.name;
    // cell2.innerHTML = "NEW CELL2";
    // cell3.innerHTML = "0 %";
    var cell3_id = "dv_";
    cell3_id = cell3_id.concat(supplement.name);
    cell3.id = cell3_id;
    // i++;
  }

  // window.onclick = function(event) {
  //   if (!event.target.matches('.dropbtn')) {
  //     var dropdowns = document.getElementsByClassName("dropdown-content");
  //     var i;
  //     for (i = 0; i < dropdowns.length; i++) {
  //       var openDropdown = dropdowns[i];
  //       if (openDropdown.classList.contains('show')) {
  //         openDropdown.classList.remove('show');
  //       }
  //     }
  //   }
  // }


  // const minusButton = document.getElementById('minus_caffeine');
  // const plusButton = document.getElementById('plus_caffeine');
  // const inputField = document.getElementById("caffeine");

  // minusButton.addEventListener('click', event => {
  //   event.preventDefault();
  //   const currentValue = Number(supplement.slider_value) || 0;
  //   inputField.value = currentValue - 1;
  // });

  // plusButton.addEventListener('click', event => {
  //   event.preventDefault();
  //   const currentValue = Number(supplement.slider_value) || 0;
  //   inputField.value = currentValue + 1;
  // });

</script>

